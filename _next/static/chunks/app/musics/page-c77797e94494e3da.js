(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7360],{57407:function(e,t,s){Promise.resolve().then(s.bind(s,82245))},82245:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(57437),a=s(95452),l=s(2265),n=s(27648),i=s(87011),o=s(18618),d=s(71924),c=s(29812);function m(e){let{active:t,totalPages:s,setActive:a,setIsLoading:l}=e,n=e=>({variant:t===e?"filled":"text",disabled:t===e,color:"white",onClick:()=>{l(!0),a(e)}});return(0,r.jsxs)("div",{className:"flex items-center gap-2 md:gap-4 overflow-x-auto px-2",children:[(0,r.jsxs)(o.Button,{variant:"text",className:"flex items-center gap-1 md:gap-2 text-yellow-300 min-w-0 p-2 md:p-3",onClick:()=>{1!==t&&(l(!0),a(t-1))},disabled:1===t,children:[(0,r.jsx)(d.Z,{strokeWidth:2,className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden md:inline",suppressHydrationWarning:!0,children:"Previous"})]}),(0,r.jsx)("div",{className:"flex items-center gap-1 md:gap-2",children:(()=>{let e=[],a=Math.floor(2.5),l=Math.max(1,t-a),i=Math.min(s,t+a);t<=a?i=Math.min(s,5):t+a>=s&&(l=Math.max(1,s-5+1)),l>1&&(e.push((0,r.jsx)(o.IconButton,{...n(1),children:"1"},1)),l>2&&e.push((0,r.jsx)("span",{children:"..."},"start-ellipsis")));for(let t=l;t<=i;t++)e.push((0,r.jsx)(o.IconButton,{...n(t),children:t},t));return i<s&&(i<s-1&&e.push((0,r.jsx)("span",{children:"..."},"end-ellipsis")),e.push((0,r.jsx)(o.IconButton,{...n(s),children:s},s))),e})().map((e,t)=>"string"==typeof e&&"..."===e?(0,r.jsx)("span",{className:"text-gray-500 px-1",children:"•••"},"ellipsis-".concat(t)):e.type===o.IconButton?{...e,props:{...e.props,className:"".concat(e.props.className," h-8 w-8 md:h-10 md:w-10 text-xs md:text-sm p-0")}}:e)}),(0,r.jsxs)(o.Button,{variant:"text",className:"flex items-center gap-1 md:gap-2 text-yellow-300 min-w-0 p-2 md:p-3",onClick:()=>{t!==s&&(l(!0),a(t+1))},disabled:t===s,children:[(0,r.jsx)("span",{className:"hidden md:inline",suppressHydrationWarning:!0,children:"Next"}),(0,r.jsx)(c.Z,{strokeWidth:2,className:"h-4 w-4"})]})]})}var x=s(79235);function u(){let[e,t]=(0,l.useState)([]),[s,d]=(0,l.useState)([]),[c,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!0),[v,w]=(0,l.useState)(1),[b,j]=(0,l.useState)(1),N=(0,a.createClientComponentClient)(),y=(0,l.useRef)(null),[k,C]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{let{data:e}=await N.auth.getSession();e.session||(window.location.href="/signin?redirect="+encodeURIComponent(window.location.pathname)),p(!0)})()},[]),(0,l.useEffect)(()=>{h&&z()},[h,v]);let M=()=>{w(1),z()};(0,l.useEffect)(()=>{if(c&&s.length){let e=async()=>{let e=[],r=[],a=s.map(e=>e.id);if(a.length){let{data:s,error:o}=await N.from("user_music").select("*").in("id",a);if(o)return;for(let t of s){var l,n;t.title=t.title||(null===(l=t.completeContent||t.firstContent||t.textContent)||void 0===l?void 0:l.title)||"SongAI Music";let s=null===(n=t.completeContent||t.firstContent||t.textContent)||void 0===n?void 0:n.image_url;if(("failed"==t.state||"complete"==t.state)&&(s=s||i.Z.suno.defaultImg),s){t.imageUrl=s,r.unshift(t);continue}e.push(t)}d(e),t(e=>[...r,...e])}};return y.current=setInterval(e,4e3),()=>{y.current&&clearInterval(y.current)}}},[c,s]),(0,l.useEffect)(()=>{y.current&&s.every(e=>e.imageUrl&&"fake"!=e.account||"failed"==e.state||"complete"==e.state)&&(clearInterval(y.current),(0,x.Z)({particleCount:300,spread:200,origin:{y:.6}}))},[s]);let z=async()=>{if(h){try{let r=[],a=[],l=N.from("user_music").select("*",{count:"exact"});k&&l.or("title.ilike.%".concat(k,"%,firstContent->>title.ilike.%").concat(k,"%,firstContent->>prompt.ilike.%").concat(k,"%"));let{data:n,count:o,error:c}=await l.range((v-1)*10,10*v-1).order("created_at",{ascending:!1});if(c)console.error(c),g(!1);else{for(let t of(j(Math.ceil(o/10)),n)){var e,s;t.title=t.title||(null===(e=t.completeContent||t.firstContent||t.textContent)||void 0===e?void 0:e.title)||"AI Music";let l=null===(s=t.completeContent||t.firstContent||t.textContent)||void 0===s?void 0:s.image_url;("failed"==t.state||"complete"==t.state)&&(l=l||i.Z.suno.defaultImg),"fake"==t.account?(t.imageUrl=l,"complete"==t.state?r.push(t):a.push(t)):l?(t.imageUrl=l,r.push(t)):a.push(t)}t(r),d(a)}}catch(e){console.error("fetch music error: ",e)}u(!0),g(!1)}};return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsxs)("div",{className:"mb-8 md:mb-12 text-center px-2",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-200 to-amber-500 mb-4 md:mb-6",children:"My Music Collection"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search music...",value:k,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&M()},className:"w-full h-10 md:h-12 px-4 pl-10 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-transparent transition-all duration-300"}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-2.5 md:top-3.5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,r.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto mt-3 sm:mt-0",children:[(0,r.jsx)(o.Button,{onClick:M,className:"flex-1 sm:flex-none bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white px-4 md:px-6 py-2 md:py-3 rounded-xl shadow-lg hover:shadow-amber-500/20 transition-all duration-300 normal-case text-sm md:text-base",children:"Search"}),(0,r.jsxs)(o.Button,{onClick:()=>window.location.href="/",className:"flex-1 sm:flex-none bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 md:px-6 py-2 md:py-3 rounded-xl shadow-lg hover:shadow-green-500/20 transition-all duration-300 normal-case flex items-center justify-center gap-1 md:gap-2 text-sm md:text-base",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{className:"hidden xs:inline",children:"New Music"}),(0,r.jsx)("span",{className:"xs:hidden",children:"New"})]})]})]})]}),f?(0,r.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen flex justify-center items-center bg-black bg-opacity-50 z-50 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-solid border-amber-500 border-r-transparent"}),(0,r.jsx)("p",{className:"text-amber-500 font-medium",children:"Loading your music..."})]})}):null,(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 md:gap-6",children:[s.map(e=>{var t;return(0,r.jsxs)("div",{className:"group relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-lg md:rounded-xl overflow-hidden shadow-lg hover:shadow-amber-500/10 border border-gray-700/30 transition-all duration-300 hover:translate-y-[-5px]",children:[(0,r.jsxs)("div",{className:"aspect-square relative overflow-hidden",children:[(0,r.jsx)("img",{src:e.imageUrl||i.Z.suno.defaultImg,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/20 to-transparent opacity-70"}),e.extend_from&&(0,r.jsx)("div",{className:"absolute top-1 md:top-3 right-1 md:right-3 z-10",children:e.extend_from.includes("whole")?(0,r.jsxs)("span",{className:"bg-amber-500/80 text-white text-[10px] md:text-xs font-medium px-1.5 md:px-2.5 py-0.5 md:py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[(0,r.jsx)("svg",{className:"w-2 h-2 md:w-3 md:h-3",fill:"currentColor",viewBox:"0 0 512 512",children:(0,r.jsx)("path",{d:"M256 152a104 104 0 1 0 104 104 104 104 0 0 0-104-104zm0 128a24 24 0 1 1 24-24 24 24 0 0 1-24 24zm0-272C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 376a128 128 0 1 1 128-128 128 128 0 0 1-128 128z"})}),"Full"]}):(0,r.jsxs)("span",{className:"bg-blue-500/80 text-white text-[10px] md:text-xs font-medium px-1.5 md:px-2.5 py-0.5 md:py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[(0,r.jsx)("svg",{className:"w-2 h-2 md:w-3 md:h-3",fill:"currentColor",viewBox:"0 0 512 512",children:(0,r.jsx)("path",{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"})}),"Part"]})}),(e.imageUrl||"fake"==e.account)&&("fake"!=e.account||"complete"==e.state)?(0,r.jsx)("a",{href:"/musics/".concat(e.id),className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"bg-amber-500 rounded-full p-2 md:p-3 transform scale-0 group-hover:scale-100 transition-all duration-300 hover:bg-amber-600",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",className:"ml-0.5 w-6 h-6 md:w-8 md:h-8",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})})})}):(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/40 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-10 w-10 md:h-16 md:w-16 animate-spin rounded-full border-4 border-solid border-amber-500 border-r-transparent"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-amber-300 text-xs md:text-base font-bold",children:(e.account.length,"<2m")})]}),(0,r.jsx)("p",{className:"mt-2 md:mt-4 text-white text-xs md:text-base font-medium",children:"Generating..."})]})]}),(0,r.jsx)("div",{className:"p-2 md:p-4",children:(0,r.jsx)("h3",{className:"font-medium text-white text-center truncate text-xs md:text-base",children:(null==e?void 0:null===(t=e.title)||void 0===t?void 0:t.length)>20?e.title.slice(0,20)+"...":e.title})})]},e.taskid)}),e.map(e=>{var t;return(0,r.jsxs)("div",{className:"group relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-lg md:rounded-xl overflow-hidden shadow-lg hover:shadow-amber-500/10 border border-gray-700/30 transition-all duration-300 hover:translate-y-[-5px]",children:[(0,r.jsxs)("div",{className:"aspect-square relative overflow-hidden",children:[(0,r.jsx)("img",{src:e.imageUrl||i.Z.suno.defaultImg,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/20 to-transparent opacity-70"}),e.extend_from&&(0,r.jsx)("div",{className:"absolute top-1 md:top-3 right-1 md:right-3 z-10",children:e.extend_from.includes("whole")?(0,r.jsxs)("span",{className:"bg-amber-500/80 text-white text-[10px] md:text-xs font-medium px-1.5 md:px-2.5 py-0.5 md:py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[(0,r.jsx)("svg",{className:"w-2 h-2 md:w-3 md:h-3",fill:"currentColor",viewBox:"0 0 512 512",children:(0,r.jsx)("path",{d:"M256 152a104 104 0 1 0 104 104 104 104 0 0 0-104-104zm0 128a24 24 0 1 1 24-24 24 24 0 0 1-24 24zm0-272C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 376a128 128 0 1 1 128-128 128 128 0 0 1-128 128z"})}),"Full"]}):(0,r.jsxs)("span",{className:"bg-blue-500/80 text-white text-[10px] md:text-xs font-medium px-1.5 md:px-2.5 py-0.5 md:py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[(0,r.jsx)("svg",{className:"w-2 h-2 md:w-3 md:h-3",fill:"currentColor",viewBox:"0 0 512 512",children:(0,r.jsx)("path",{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"})}),"Part"]})}),(0,r.jsx)("a",{href:"/musics/".concat(e.id),className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"bg-amber-500 rounded-full p-2 md:p-3 transform scale-0 group-hover:scale-100 transition-all duration-300 hover:bg-amber-600",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",className:"ml-0.5 w-6 h-6 md:w-8 md:h-8",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})})})})]}),(0,r.jsx)("div",{className:"p-2 md:p-4",children:(0,r.jsx)("h3",{className:"font-medium text-white text-center truncate text-xs md:text-base",children:(null==e?void 0:null===(t=e.title)||void 0===t?void 0:t.length)>20?e.title.slice(0,20)+"...":e.title})})]},e.taskid)})]}),b?(0,r.jsx)("div",{className:"flex items-center justify-center mx-auto mt-8 md:mt-16",children:(0,r.jsx)(m,{active:v,totalPages:b,setActive:w,setIsLoading:g})}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center mx-auto mt-8 md:mt-16 p-6 md:p-10 bg-gray-800/30 rounded-xl border border-gray-700/30",children:[k?(0,r.jsxs)("p",{className:"text-gray-300 mb-4 text-sm md:text-base",children:['No results found for "',k,'".']}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-4 md:mb-6",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 md:h-20 md:w-20 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),(0,r.jsx)("p",{className:"text-gray-300 mb-4 text-center max-w-md text-sm md:text-base",children:"You haven't generated any music yet. Come and create unique music that is unparalleled in the world."})]}),(0,r.jsxs)(n.default,{href:"/",className:"px-4 md:px-6 py-2 md:py-3 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white rounded-xl shadow-lg hover:shadow-amber-500/20 transition-all duration-300 flex items-center gap-2 text-sm md:text-base",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Music"]})]})]})}}},function(e){e.O(0,[6384,2972,5452,4324,1760,7011,2971,5030,1744],function(){return e(e.s=57407)}),_N_E=e.O()}]);